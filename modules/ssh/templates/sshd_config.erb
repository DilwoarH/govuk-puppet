Port                            22
Protocol                        2
HostKey                         /etc/ssh/ssh_host_rsa_key
HostKey                         /etc/ssh/ssh_host_dsa_key
UsePrivilegeSeparation          yes

SyslogFacility                  AUTH
LogLevel                        INFO

LoginGraceTime                  120
StrictModes                     yes

RSAAuthentication               yes
PubkeyAuthentication            yes

IgnoreRhosts                    yes
HostbasedAuthentication         no
PermitEmptyPasswords            no
KerberosAuthentication          no
GSSAPIAuthentication            no

PermitRootLogin                 no
PasswordAuthentication          no
ChallengeResponseAuthentication no

<%- if @govuk_platform == "development" -%>
X11Forwarding                   yes
X11DisplayOffset                10
<%- else -%>
X11Forwarding                   no
AllowAgentForwarding            no
<%- end -%>

<%- if @govuk_class == "jumpbox" -%>
AllowUsers <%= @ssh_allow_users %>
<%- end -%>

PrintMotd                       no
PrintLastLog                    yes
TCPKeepAlive                    yes

AcceptEnv                       LANG LC_*

Subsystem     sftp              /usr/lib/openssh/sftp-server

UsePAM                          yes
