---
- scm:
    name: govuk-provisioning_Production_Launch_VMs
    scm:
        - git:
            url: https://github.gds/gds/govuk-provisioning/
            branches:
              - master
- job:
    name: Production_Launch_VMs
    display-name: Production_Launch_VMs
    project-type: freestyle
    description: "Job to launch VMs in production.\r\nIf you are running this to bring
      up a new machine you will need to be signing certs on the puppetmaster.\r\nA oneliner
      to do this: while true; do sudo puppet cert sign --all; sleep 10; done"
    properties:
        - github:
            url: https://github.gds/gds/alphagov-deployment/
        - inject:
            properties-content: |
              VCLOUD_ORG=4-3-62-0a9bbb
              VCLOUD_ENV=production_skyscape
              VCLOUD_USERNAME=${USERNAME}@${VCLOUD_ORG}
              VCLOUD_HOST=api.vcd.portal.skyscapecloud.com
    scm:
      - govuk-provisioning_Production_Launch_VMs
    builders:
        - shell: |
            ./vcloud-launcher/jenkins.sh
    parameters:
        - string:
            name: USERNAME
            description: your vcloud username. probably in the form of 12.3.45a6b7
            default: false
        - string:
            name: CONFIG_GLOB
            description: glob for config files.
            default: "*.yaml"
        - password:
            name: VCLOUD_PASSWORD
            description: your vcloud password
            default: false
