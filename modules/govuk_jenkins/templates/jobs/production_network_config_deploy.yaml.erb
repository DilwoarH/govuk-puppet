---
- scm:
    name: govuk-provisioning_Production_Network_Config_Deploy
    scm:
        - git:
            url: git@github.gds:gds/govuk-provisioning.git
            branches:
              - master

- job:
    name: Production_Network_Config_Deploy
    display-name: Production_Network_Config_Deploy
    project-type: freestyle
    description: "This job configures the edge gateway on Skyscape Platform 1 in *production*. It uses the configuration in the g      ovuk-provisioning repo."
    properties:
        - github:
            url: https://github.gds/gds/govuk-provisioning/
    scm:
      - govuk-provisioning_Production_Network_Config_Deploy
    builders:
        - shell: |
            ./vcloud-edge_gateway/jenkins.sh production
    publishers:
        - trigger:
            project: Smokey_Production
    wrappers:
        - ansicolor:
            colormap: xterm
        - build-name:
            name: '#${BUILD_NUMBER} ${ENV,var="component"}'
    parameters:
        - choice:
            name: COMPONENT
            description: Which part of the networking config do you wish to update?
            choices:
                - PLEASE CHOOSE ONE
                - lb
                - nat
                - firewall
        - string:
            name: TAG
            description: Git tag/committish to deploy.
            default: release
        - password:
            name: VCLOUD_PASSWORD
            description: Vcloud Password
            default: false
