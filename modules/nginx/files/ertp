server {
  server_name  _;
  listen *:80;

  location /admin {
    proxy_pass http://127.0.0.1:9500;
    deny all;
    auth_basic            "Enter your ertp admin password";
    auth_basic_user_file  /etc/nginx/htpasswd/htpasswd.ertp;
    satisfy any;
  }

  location / {
    rewrite ^/(.*)$ /register-to-vote;
  }

  location /register-to-vote {
    proxy_pass http://127.0.0.1:9000/register-to-vote;
    deny all;
    auth_basic            "Enter your ertp password";
    auth_basic_user_file  /etc/nginx/htpasswd/htpasswd.ertp;
    satisfy any;
  }
}
