input {
  amqp {
    type      => "all"
    host      => "localhost"
    exchange  => "rawlogs"
    name      => "rawlogs_consumer"
    exclusive => false
  }
  amqp {
    type      => "all"
    host      => "localhost"
    exchange  => "rawlogs"
    name      => "rawlogs_consumer"
    exclusive => false
  }
  amqp {
    type      => "all"
    host      => "localhost"
    exchange  => "rawlogs"
    name      => "rawlogs_consumer"
    exclusive => false
  }
}

output {
  elasticsearch {
    cluster => "logstash-server"
    host    => "localhost"
    port    => <%= transport_port %>
  }
  file {
    path => "/var/log/logstash-aggregation/%{@source_host}/%{@source_path}"
    message_format => "%{@message}"
  }
}
