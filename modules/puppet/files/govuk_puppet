#!/bin/sh

# Prepend to PATH for when:
#   - rbenv ruby shim is in /usr/lib/rbenv/shims/ruby
#   - Cron runs with `PATH=/usr/bin:bin`
PATH="/usr/lib/rbenv/shims:${PATH}"
CMD="puppet agent --onetime --no-daemonize"

if [ "$(id -u)" -eq "0" ]; then
  RBENV_VERSION=1.9.3 exec $CMD "$@"
else
  exec sudo RBENV_VERSION=1.9.3 $CMD "$@"
fi
