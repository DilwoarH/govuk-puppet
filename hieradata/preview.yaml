---
app_domain: 'preview.alphagov.co.uk'

backup::mysql::rotation_daily: '2'
backup::mysql::rotation_weekly: '6'
backup::mysql::rotation_monthly: '28'

base::supported_kernel::enabled: true

cron::weekly_dow: 1

govuk::apps::courts_api::enabled: true
govuk::apps::courts_frontend::enabled: true
govuk::apps::email_alert_monitor::enabled: true
govuk::apps::email_campaign_api::mongodb_nodes:
  - 'api-mongo-1.api'
  - 'api-mongo-2.api'
  - 'api-mongo-3.api'
govuk::apps::errbit::errbit_email_from: 'govuk-winston+errbit-preview@digital.cabinet-office.gov.uk'
govuk::apps::event_store::enabled: true
govuk::apps::government_frontend::enable_service_manual: true
govuk::apps::hmrc_manuals_api::allow_unknown_hmrc_manual_slugs: true
govuk::apps::mapit::enabled: true
govuk::apps::publicapi::backdrop_host: 'www.preview.performance.service.gov.uk'
govuk::apps::service_manual_publisher::enabled: true
govuk::apps::signon::enable_logstream: true
govuk::apps::smartanswers::expose_govspeak: true
govuk::apps::specialist_publisher::publish_pre_production_finders: true

govuk::deploy::aws_ses_smtp_host: 'email-smtp.eu-west-1.amazonaws.com'
govuk::deploy::config::errbit_environment_name: 'preview'
govuk::deploy::config::website_root: "https://www.%{hiera('app_domain')}"
govuk::deploy::setup::ssh_keys:
  jenkins_key: AAAAB3NzaC1yc2EAAAADAQABAAABAQDa9RlyGmK0r/JOL2rRdJA1e64vr1pJ6fv2PaqfuuvxtIWwG+VRV6PO2FbahJF9vRNZPWVAJY32olkvE5jHT5hYP9VULhQNfOMzyFwgx8D/g/ofp6Iu+t5UltES3ER4r6id7kwB7AskgMaFXuiOq5n2l08+w+n9P/7I0k4Ptr2eMDL3KTgZ9V9pc2iriULdflRrdmiY0CFzpRfopVXQHxzVM1Ko9ytdxCFHbdTnnMyueQm3bNC6uuwHs2Hcecq1LB1OtfUBS5OHeR6uES3tPpQ1MzP9/DTmwYhsDZUMRIEwy4gB4S+Jb9e81U9BmZgrDdfgW//wXy534GqUSYcANjID
  jenkins_production_carrenza: 'AAAAB3NzaC1yc2EAAAADAQABAAABAQDvfe5R+1OKwEBQqQIECW4k4LaFrTZedFWK5pzSAM6QxpQtCbKau4ZnD1ToPLX/IGYnW9m/2QfTQoBUtJvERjJvvGs7Wy6I+nKpr4gBVuDiFWilaXZ0rhdlnfU+r/DvFwRR5qjt7pewAlzdcDKp/NAa9BPIYL+YSX4XAZE0b8YMGxeJFQ4sd4CloTJxiUF2F1t2OObXhdQfp2BKtjHMwqClxW6ZthjKcqT4tBkZfo/gzd0TG0FmykNH+tG5q9Y7oxxe52TfJudIobSLgbmXOoEuSNjlwgktb6B+K3J08txo7dG0HrDdamSDTQxXVhn1K1re3cMJokV0N59hazHh7+vx'

govuk_crawler::seed_enable: false

govuk_elasticsearch::dump::run_es_dump_hour: '9'

govuk_mysql::server::innodb_file_per_table: true
govuk_mysql::server::slow_query_log: true

govuk::node::s_api_lb::api_servers:
  - "api-1.api"
  - "api-2.api"
govuk::node::s_api_lb::content_store_servers:
  - "content-store-1.api"
  - "content-store-2.api"
govuk::node::s_api_lb::draft_content_store_servers:
- "draft-content-store-1.api"
- "draft-content-store-2.api"
govuk::node::s_api_lb::email_campaign_api_servers:
  - "email-campaign-api-1.api"
  - "email-campaign-api-2.api"
govuk::node::s_api_lb::search_servers:
  - "search-1.api"
  - "search-2.api"

govuk::node::s_backend_lb::backend_servers:
  - 'backend-1.backend'
  - 'backend-2.backend'
govuk::node::s_backend_lb::performance_backend_servers:
  - 'performance-backend-1.backend'
  - 'performance-backend-2.backend'
govuk::node::s_backend_lb::whitehall_backend_servers:
  - 'whitehall-backend-1.backend'
  - 'whitehall-backend-2.backend'
govuk::node::s_backend_lb::mapit_servers:
  - 'mapit-server-1.backend'
  - 'mapit-server-2.backend'
govuk::node::s_backend_lb::perfplat_public_app_domain: 'preview.performance.service.gov.uk'
govuk::node::s_backup::backup_efg: false
govuk::node::s_backup::backup_email_campaign: false
govuk::node::s_cache::real_ip_header: 'X-Forwarded-For'
govuk::node::s_cache::protect_cache_servers: true
govuk::node::s_frontend_lb::calculators_frontend_servers:
  - 'calculators-frontend-1.frontend'
  - 'calculators-frontend-2.frontend'
govuk::node::s_frontend_lb::draft_frontend_servers:
  - 'draft-frontend-1.frontend'
  - 'draft-frontend-2.frontend'
govuk::node::s_frontend_lb::email_campaign_frontend_servers:
  - "email-campaign-frontend-1.frontend"
  - "email-campaign-frontend-2.frontend"
govuk::node::s_frontend_lb::frontend_servers:
  - 'frontend-1.frontend'
  - 'frontend-2.frontend'
govuk::node::s_frontend_lb::performance_frontend_servers:
  - 'performance-frontend-1.frontend'
  - 'performance-frontend-2.frontend'
govuk::node::s_frontend_lb::performance_frontend_apps:
  - 'spotlight'
  - 'performanceplatform-big-screen-view'
govuk::node::s_frontend_lb::whitehall_frontend_servers:
  - 'whitehall-frontend-1.frontend'
  - 'whitehall-frontend-2.frontend'
govuk::node::s_logs_elasticsearch::rotate_hour: 06
govuk::node::s_logs_elasticsearch::rotate_minute: 00
# to enable/disable licensing_api next two flags are necessary (yes I know this breaks the alphabet)
govuk::node::s_licensify_backend::enable_licensing_api: true
govuk::node::s_licensify_lb::enable_licensing_api: true
govuk::node::s_licensify_lb::enable_feed_console: true
govuk::node::s_licensify_lb::licensify_backend_servers:
  - 'licensify-backend-1.licensify'
  - 'licensify-backend-2.licensify'
govuk::node::s_licensify_lb::licensify_frontend_servers:
  - 'licensify-frontend-1.licensify'
  - 'licensify-frontend-2.licensify'
govuk::node::s_licensify_mongo::mongodb_backup_disk: '/dev/sdb1'
govuk::node::s_licensify_mongo::licensify_mongo_encrypted: false
govuk::node::s_logging::compress_srv_logs_hour: '9'
govuk::node::s_whitehall_backend::sync_mirror: true

govuk::ppa::path: 'preview'

hosts::production::api::hosts:
  api-1:
    ip: '10.7.0.16'
  api-2:
    ip: '10.7.0.17'
  api-elasticsearch-1:
    ip: '10.7.0.25'
  api-elasticsearch-2:
    ip: '10.7.0.26'
  api-elasticsearch-3:
    ip: '10.7.0.27'
  api-lb-1:
    ip: '10.7.0.101'
  api-lb-2:
    ip: '10.7.0.102'
  api-mongo-1:
    ip: '10.7.0.21'
  api-mongo-2:
    ip: '10.7.0.22'
  api-mongo-3:
    ip: '10.7.0.23'
  api-postgresql-primary-1:
    ip: '10.7.0.40'
  api-postgresql-standby-1:
    ip: '10.7.0.41'
  api-redis-1:
    ip: '10.7.0.29'
  content-store-1:
    ip: '10.7.0.11'
  content-store-2:
    ip: '10.7.0.12'
  content-store-3:
    ip: '10.7.0.13'
  draft-content-store-1:
    ip: '10.7.2.11'
  draft-content-store-2:
    ip: '10.7.2.12'
  email-campaign-api-1:
    ip: '10.7.2.50'
  email-campaign-api-2:
    ip: '10.7.2.51'
  email-campaign-api-3:
    ip: '10.7.2.52'
  email-campaign-mongo-1:
    ip: '10.7.2.53'
  email-campaign-mongo-2:
    ip: '10.7.2.54'
  email-campaign-mongo-3:
    ip: '10.7.2.55'
  mapit-1:
    ip: '10.7.0.51'
  performance-mongo-1:
    ip: '10.7.0.31'
  performance-mongo-2:
    ip: '10.7.0.32'
  performance-mongo-3:
    ip: '10.7.0.33'
  search-1:
    ip: '10.7.0.4'
  search-2:
    ip: '10.7.0.5'
  search-3:
    ip: '10.7.0.6'

hosts::production::backend::hosts:
  asset-master-1:
    ip: '10.3.0.20'
    legacy_aliases:
      - "asset-master-1.%{hiera('app_domain')}"
      - 'asset-master'
      - "asset-master.%{hiera('app_domain')}"
  asset-slave-1:
    ip: '10.3.0.21'
    legacy_aliases:
      - "asset-slave-1.%{hiera('app_domain')}"
      - 'asset-slave'
      - "asset-slave.%{hiera('app_domain')}"
  backend-1:
    ip: '10.3.0.2'
  backend-2:
    ip: '10.3.0.3'
  backend-3:
    ip: '10.3.0.4'
  backend-lb-1:
    ip: '10.3.0.101'
  backend-lb-2:
    ip: '10.3.0.102'
  elasticsearch-1:
    ip: '10.3.0.15'
  elasticsearch-2:
    ip: '10.3.0.16'
  elasticsearch-3:
    ip: '10.3.0.17'
  exception-handler-1:
    ip: '10.3.0.40'
  mapit-server-1:
    ip: '10.3.0.9'
  mapit-server-2:
    ip: '10.3.0.10'
  mongo-1:
    ip: '10.3.0.6'
    service_aliases:
      - 'mongodb'
  mongo-2:
    ip: '10.3.0.7'
  mongo-3:
    ip: '10.3.0.8'
  mysql-backup-1:
    ip: '10.3.10.2'
    legacy_aliases:
      - 'backup.mysql'
  mysql-master-1:
    ip: '10.3.10.0'
    legacy_aliases:
      - 'master.mysql'
      - "mysql.backend.%{hiera('internal_tld')}"
  mysql-slave-1:
    ip: '10.3.10.1'
    legacy_aliases:
      - 'slave.mysql'
  mysql-slave-2:
    ip: '10.3.10.3'
  performance-backend-1:
    ip: '10.3.0.80'
  performance-backend-2:
    ip: '10.3.0.81'
  postgresql-primary-1:
    ip: '10.3.20.12'
  postgresql-standby-1:
    ip: '10.3.20.13'
  rabbitmq-1:
    ip: '10.3.0.70'
  rabbitmq-2:
    ip: '10.3.0.71'
  rabbitmq-3:
    ip: '10.3.0.72'
  redis-1:
    ip: '10.3.0.50'
  redis-2:
    ip: '10.3.0.51'
  transition-postgresql-master-1:
    ip: '10.3.20.1'
    legacy_aliases:
      - 'transition-master.postgresql'
      - "transition-postgresql.backend.%{hiera('internal_tld')}"
  transition-postgresql-slave-1:
    ip: '10.3.20.2'
    legacy_aliases:
      - 'transition-slave.postgresql'
  whitehall-backend-1:
    ip: '10.3.0.25'
  whitehall-backend-2:
    ip: '10.3.0.26'
  whitehall-backend-3:
    ip: '10.3.0.27'
  whitehall-backend-4:
    ip: '10.3.0.28'
  whitehall-mysql-backup-1:
    ip: '10.3.10.34'
    legacy_aliases:
      - 'whitehall-backup.mysql'
  whitehall-mysql-master-1:
    ip: '10.3.10.30'
    legacy_aliases:
      - 'whitehall-master.mysql'
      - "whitehall-mysql.backend.%{hiera('internal_tld')}"
  whitehall-mysql-slave-1:
    ip: '10.3.10.31'
    legacy_aliases:
      - 'whitehall-slave.mysql'
  whitehall-mysql-slave-2:
    ip: '10.3.10.32'

hosts::production::carrenza_vcloud: true
hosts::production::ip_bouncer: '10.133.0.40'

hosts::production::frontend::hosts:
  calculators-frontend-1:
    ip: '10.2.0.11'
  calculators-frontend-2:
    ip: '10.2.0.12'
  calculators-frontend-3:
    ip: '10.2.0.13'
  frontend-1:
    ip: '10.2.0.2'
  frontend-2:
    ip: '10.2.0.3'
  frontend-3:
    ip: '10.2.0.4'
  draft-frontend-1:
    ip: '10.2.2.2'
  draft-frontend-2:
    ip: '10.2.2.3'
  email-campaign-frontend-1:
    ip: '10.2.0.30'
  email-campaign-frontend-2:
    ip: '10.2.0.31'
  email-campaign-frontend-3:
    ip: '10.2.0.32'
  performance-frontend-1:
    ip: '10.2.0.20'
  performance-frontend-2:
    ip: '10.2.0.21'
  whitehall-frontend-1:
    ip: '10.2.0.5'
  whitehall-frontend-2:
    ip: '10.2.0.6'
  whitehall-frontend-3:
    ip: '10.2.0.10'
  whitehall-frontend-4:
    ip: '10.2.0.14'
  whitehall-frontend-5:
    ip: '10.2.0.15'
  whitehall-frontend-6:
    ip: '10.2.0.16'
  whitehall-frontend-7:
    ip: '10.2.0.17'
  frontend-lb-1:
    ip: '10.2.0.101'
  frontend-lb-2:
    ip: '10.2.0.102'

hosts::production::licensify::app_hostnames:
  - 'licensify'
  - 'uploadlicence'
  - 'licensify-admin'
  - 'licensing-web-forms'

hosts::production::management::hosts:
  jenkins-1:
    ip: '10.0.0.3'
  puppetmaster-1:
    ip: '10.0.0.5'
    legacy_aliases:
      - 'puppet'
    service_aliases:
      - 'puppet'
      - 'puppetdb'
  monitoring-1:
    ip: '10.0.0.20'
    legacy_aliases:
      - 'monitoring'
      - "nagios.%{hiera('app_domain')}"
    service_aliases:
      - 'alert'
      - 'monitoring'
      - 'nagios'
  graphite-1:
    ip: '10.0.0.22'
    legacy_aliases:
      - "graphite.%{hiera('app_domain')}"
    service_aliases:
      - 'graphite'
  logs-cdn-1:
    ip: '10.0.0.27'
  logging-1:
    ip: '10.0.0.28'
    service_aliases:
      - 'logging'
  logs-elasticsearch-1:
    ip: '10.0.0.29'
    service_aliases:
      - 'logs-elasticsearch'
  logs-elasticsearch-2:
    ip: '10.0.0.30'
  logs-elasticsearch-3:
    ip: '10.0.0.31'
  logs-redis-1:
    ip: '10.0.0.40'
  logs-redis-2:
    ip: '10.0.0.41'
  backup-1:
    ip: '10.0.0.50'
  etcd-1:
    ip: '10.0.0.60'
  etcd-2:
    ip: '10.0.0.61'
  etcd-3:
    ip: '10.0.0.62'
  apt-1:
    ip: '10.0.0.75'
    service_aliases:
      - 'apt'
  jumpbox-1:
    ip: '10.0.0.100'
  mirrorer-1:
    ip: '10.0.0.128'
  jumpbox-2:
    ip: '10.0.0.200'

hosts::production::redirector::hosts:
  bouncer-1:
    ip: '10.6.0.4'
  bouncer-2:
    ip: '10.6.0.5'
  bouncer-3:
    ip: '10.6.0.6'

hosts::production::router::hosts:
  cache-1:
    ip: '10.1.0.2'
  cache-2:
    ip: '10.1.0.3'
  cache-3:
    ip: '10.1.0.4'
  draft-cache-1:
    ip: '10.1.2.2'
  draft-cache-2:
    ip: '10.1.2.3'
  router-backend-1:
    ip: '10.1.0.10'
  router-backend-2:
    ip: '10.1.0.11'
  router-backend-3:
    ip: '10.1.0.12'
  cache:
    ip: '10.1.1.1'
    legacy_aliases:
      - 'cache'
      - "www.%{hiera('app_domain')}"
      - "www-origin.%{hiera('app_domain')}"
      - "assets-origin.%{hiera('app_domain')}"
    service_aliases:
      - 'cache'
      - 'router'
  router-backend-internal-lb:
    ip: '10.1.1.2'
    legacy_aliases:
      - "router-api.%{hiera('app_domain')}"
  draft-cache-internal-lb:
    ip: '10.1.2.1'
    legacy_aliases:
      - "draft-router-api.%{hiera('app_domain')}"

icinga::client::check_cputype::cputype: 'amd'

internal_tld: 'production'

licensify::apps::licensing_web_forms::enabled: true

monitoring::checks::pingdom::enable: false
monitoring::checks::ses::region: eu-west-1

postfix::smarthost:
  - 'email-smtp.eu-west-1.amazonaws.com:587'
  - 'ses-smtp-eu-west-1-prod-345515633.eu-west-1.elb.amazonaws.com:587'

postgresql_api_slave_addresses_live: '10.7.0.41/32'
postgresql_slave_addresses_live: '10.3.20.13/32'
postgresql_transition_slave_addresses_live: '10.3.20.2/32'

router::nginx::check_requests_warning: '@0.5'
router::nginx::check_requests_critical: '@0.25'

shell::shell_prompt_string: 'preview'

users::usernames:
  - alexmuller
  - alextorrance
  - andrewvos
  - benilovj
  - benlovell
  - bob
  - bradleyw
  - chrispatuzzo
  - chrisroos
  - daivaughan
  - danielroseman
  - davidbasalla
  - davidsingleton
  - elliot
  - gemmaleigh
  - isabelllong
  - jackscotti
  - jamesmead
  - jamiec
  - jennyduckett
  - joshmyers
  - leelongmore
  - leenagupte
  - marksheldon
  - mattbostock
  - mobaig
  - murraysteele
  - paulbowsher
  - paulhayes
  - paulmartin
  - richardboulton
  - robinwhittleton
  - robyoung
  - simonhughesdon
  - stephenrichards
  - stevelaing
  - stuartgale
  - tadast
  - tatianasoukiassian
  - tijmenbrommet
  - timothymower
  - tombooth
  - tommypalmer
